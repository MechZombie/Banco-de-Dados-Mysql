
-- ESTRUTURA

DELIMITER $
CREATE TRIGGER NOME
BEFORE/AFTER INSERT/DELETE/UPDATE ON TABELA
FOR EACH ROW (PARA CADA LINHA)
BEGIN
    COMANDO SQL;
END
$ 

-- CRIANDO TABELA DE USUARIO
CREATE TABLE USUARIO(
    IDUSUARIO INT PRIMARY KEY AUTO_INCREMENT,
    NOME VARCHAR(30),
    LOGIN VARCHAR(30),
    SENHA VARCHAR(100)
);

-- CRIANDO TABELA DE BACKUP
CREATE TABLE BKP_USUARIO(
    IDBACKUP INT PRIMARY KEY AUTO_INCREMENT,
    IDUSUARIO INT,
    NOME VARCHAR(30),
    LOGIN VARCHAR(30)
);

-- CRIANDO UMA TRIGER PARA FAZER BACKUP DOS DADOS DE USUARIO
CREATE TRIGGER BACKUP_USER
BEFORE DELETE ON USUARIO
FOR EACH ROW
BEGIN
    INSERT INTO BKP_USUARIO VALUES(NULL,OLD.IDUSUARIO,OLD.NOME,OLD.LOGIN);
END
$    

-- CRIANDO USU√ÅRIO
INSERT INTO USUARIO VALUES(NULL,'ALBERTO','TESTE01','SENHA01');
INSERT INTO USUARIO VALUES(NULL,'JESSICA','TESTE02','SENHA02');

-- DELETANDO PARA CHECAR A TRIGGER
DELETE FROM USUARIO WHERE IDUSUARIO =1;
